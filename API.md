**API**

| Method | Endpoint                                                  | Description                            | Request Body                                           | Response Body                                                |
| ------ | --------------------------------------------------------- | -------------------------------------- | ------------------------------------------------------ | ------------------------------------------------------------ |
| POST   | `/login`                                                  | Authenticate and get a bearer token    | [Credentials](packages/core/src/domain/user.ts)        | [Token](packages/core/src/domain/token.ts)                   |
| GET    | `/auth/refresh_token`                                     | Gets a new token, with extended expiry | -                                                      | [Token](packages/core/src/domain/token.ts)                   |
| GET    | `/profile`                                                | User profile                           | -                                                      | [GetUser](packages/core/src/domain/user.ts)                  |
| PUT    | `/profile`                                                | Update current user profile            | [PostUser](packages/core/src/domain/user.ts)           | [GetUser](packages/core/src/domain/user.ts)                  |
| POST   | `/profile`                                                | Update current user password           | [PasswordChange](packages/core/src/domain/user.ts)     | [GetUser](packages/core/src/domain/user.ts)                  |
| DELETE | `/profile`                                                | Delete current user profile            | -                                                      | [Optional<Id>](packages/core/src/domain/id.ts)               |
| GET    | `/prefs`                                                  | Get current user prefs                 | -                                                      | [GetPrefs](packages/core/src/domain/prefs.ts)                |
| PUT    | `/prefs`                                                  | Update current user prefs              | [PostPrefs](packages/core/src/domain/prefs.ts)         | [GetPrefs](packages/core/src/domain/prefs.ts)                |
| GET    | `/user`                                                   | Get users profiles (admin only)        | -                                                      | [GetUser[]](packages/core/src/domain/user.ts)                |
| GET    | `/user/{user_id}`                                         | Get user profile (admin only)          | -                                                      | [GetUser](packages/core/src/domain/user.ts)                  |
| DELETE | `/user/{user_id}`                                         | Delete user profile (admin only)       | -                                                      | [GetUser](packages/core/src/domain/user.ts)                  |
| POST   | `/user`                                                   | Create new user (admin only)           | [PostUser](packages/core/src/domain/user.ts)           | [GetUser](packages/core/src/domain/user.ts)                  |
| PUT    | `/user`                                                   | Update user profile (admin only)       | [PostUser](packages/core/src/domain/user.ts)           | [GetUser](packages/core/src/domain/user.ts)                  |
| GET    | `/summary`                                                | Summary across all portfolios          | -                                                      | [Summary](packages/core/src/domain/summary.ts)               |
| POST   | `/portfolios`                                             | Create a new portfolio                 | [PostPortfolio](packages/core/src/domain/portfolio.ts) | [GetPortfolio](packages/core/src/domain/portfolio.ts)        |
| GET    | `/portfolios`                                             | List all portfolios                    | —                                                      | [GetPortfolio[]](packages/core/src/domain/portfolio.ts)      |
| GET    | `/portfolios/{portfolio_id}`                              | Get a portfolio by ID                  | —                                                      | [GetPortfolio](packages/core/src/domain/portfolio.ts)        |
| DELETE | `/portfolios/{portfolio_id}`                              | Delete a portfolio                     | —                                                      | [Optional<Id>](packages/core/src/domain/id.ts)               |
| PUT    | `/portfolios/{portfolio_id}`                              | Update a portfolio                     | [PostPortfolio](packages/core/src/domain/portfolio.ts) | [GetPortfolio](packages/core/src/domain/portfolio.ts)        |
| POST   | `/portfolios/{portfolio_id}/assets`                       | Add an asset to a portfolio            | [PostAsset](packages/core/src/domain/portfolio.ts)     | [GetAsset](packages/core/src/domain/portfolio.ts)            |
| GET    | `/portfolios/{portfolio_id}/assets`                       | List assets in a portfolio             | —                                                      | [GetAsset[]](packages/core/src/domain/portfolio.ts)          |
| GET    | `/portfolios/{portfolio_id}/assets/{asset_id}`            | Get an asset by ID                     | —                                                      | [GetAsset](packages/core/src/domain/portfolio.ts)            |
| DELETE | `/portfolios/{portfolio_id}/assets/{asset_id}`            | Delete an asset by ID                  | —                                                      | [Optional<Id>](packages/core/src/domain/id.ts)               |
| PUT    | `/portfolios/{portfolio_id}/assets/{asset_id}`            | Update an asset by ID                  | [PostAsset](packages/core/src/domain/portfolio.ts)     | [GetAsset](packages/core/src/domain/portfolio.ts)            |
| POST   | `/portfolios/{portfolio_id}/assets/{asset_id}/tx`         | Create a transaction for a given asset | [PostTx](packages/core/src/domain/tx.ts)               | [GetTx](packages/core/src/domain/tx.ts)                      |
| GET    | `/portfolios/{portfolio_id}/assets/{asset_id}/tx`         | Get all transactions for asset         | —                                                      | [GetTx[]](packages/core/src/domain/tx.ts)                    |
| GET    | `/portfolios/{portfolio_id}/assets/{asset_id}/tx/{tx_id}` | Get a transaction by ID                | —                                                      | [GetTx](packages/core/src/domain/tx.ts)                      |
| DELETE | `/portfolios/{portfolio_id}/assets/{asset_id}/tx/{tx_id}` | Delete a transaction by ID             | —                                                      | [Optional<Id>](packages/core/src/domain/id.ts)               |
| PUT    | `/portfolios/{portfolio_id}/assets/{asset_id}/tx/{tx_id}` | Update a transaction by ID             | [PostTx](packages/core/src/domain/tx.ts)               | [GetTx](packages/core/src/domain/tx.ts)                      |
| DELETE | `/portfolios/{portfolio_id}/assets/{asset_id}/txs`        | Delete all transactions for an asset   | —                                                      | [Optional<Id>](packages/core/src/domain/id.ts)               |
| POST   | `/portfolios/{portfolio_id}/assets/{asset_id}/txs`        | Bulk insert transactions for an asset  | [PostTxsUpload](packages/core/src/domain/tx.ts)        | [GetTx[]](packages/core/src/domain/tx.ts)                    |
| POST   | `/lookup/ticker?query=TICKER`                             | Query for ticker details               | —                                                      | [YahooTickerSearchResult](packages/core/src/domain/yahoo.ts) |
| POST   | `/lookup/fx/{base}/{ccy}/{date?}`                         | Get FX rates for base/ccy              | —                                                      | [Fx](packages/core/src/domain/yahoo.ts)                      |
